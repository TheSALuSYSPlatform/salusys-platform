---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import Socials from "@/components/Socials.astro";
import LinkButton from "@/components/LinkButton.astro";
import { SOCIALS } from "@/constants";
---

<Layout>
  <Header />
  <main id="main-content" data-layout="index" class="app-layout">
    <section id="hero" class:list={["pt-8 pb-6", "border-b border-border"]}>
      <h1 class="my-4 inline-block text-4xl font-bold sm:my-8 sm:text-5xl">
        Systems for Safer Places
      </h1>

      <p>
        A systems-based platform offering products and frameworks that improve safety across the spaces people depend on—by strengthening protection and how work gets done.
      </p>

      <p class="mt-4">
        We bring together people, spaces, and operations into integrated safety systems that reduce friction, improve workflows, and perform in real-world environments.
      </p>

      <div class="mt-6 flex flex-wrap items-center gap-4">
        <LinkButton href="/about">Explore the Platform</LinkButton>
        <LinkButton
          class="underline decoration-dashed underline-offset-4 hover:text-accent"
          href="/about"
        >
          Why Systems Matter →
        </LinkButton>
      </div>

      {
        // only display if at least one social link is enabled
        SOCIALS.length > 0 && (
          <div class="mt-6 flex max-sm:flex-col sm:items-center">
            <div class="me-2 mb-1 whitespace-nowrap sm:mb-0">Social Links:</div>
            <Socials />
          </div>
        )
      }
    </section>
  </main>
  <Footer />
</Layout>

<script>
  document.addEventListener("astro:page-load", () => {
    const indexLayout = (document.querySelector("#main-content") as HTMLElement)
      ?.dataset?.layout;
    if (indexLayout) {
      sessionStorage.setItem("backUrl", "/");
    }
  });
</script>
